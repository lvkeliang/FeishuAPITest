{"name": "test_post_messages[positive_\\u57fa\\u7840\\u5bcc\\u6587\\u672c\\u6d88\\u606f\\u6d4b\\u8bd5_0]", "status": "broken", "statusDetails": {"message": "FileNotFoundError: [Errno 2] No such file or directory: 'F:\\\\pictures\\\\mountainschool2.jpg'", "trace": "request = <SubRequest 'prepared_test_case' for <Function test_post_messages[positive_\\u57fa\\u7840\\u5bcc\\u6587\\u672c\\u6d88\\u606f\\u6d4b\\u8bd5_0]>>\n\n    @pytest.fixture\n    def prepared_test_case(request):\n        \"\"\"准备测试用例，执行setup并替换变量\"\"\"\n        loader = test_case_loader\n        test_case = request.param  # 从参数化获取测试用例\n    \n        # 1. 执行setup操作\n        if test_case.setup:\n>           setup_context = loader.execute_setup(test_case.setup)\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests/api/test_message.py:23: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntests/test_data/case_loader.py:108: in execute_setup\n    context[action[\"save_to\"]] = feishu_client.upload_image(action[\"image_path\"], action[\"image_type\"])\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <tests.client.client.FeishuClient object at 0x107cf0990>, image_path = 'F:\\\\pictures\\\\mountainschool2.jpg', image_type = 'message'\nendpoint = '/open-apis/im/v1/images', kwargs = {}, url = 'https://open.feishu.cn/open-apis/im/v1/images'\nheaders = {'Authorization': 'Bearer t-g10476nI7OP6U2GQ22MJJFT434BGTDNDANABWR4F'}\n\n    def upload_image(\n            self,\n            image_path: Union[str, Path],\n            image_type: str = \"message\",  # \"message(用于发送消息)\"|\"avatar(用于设置头像)\"\n            endpoint: str = \"/open-apis/im/v1/images\",\n            **kwargs\n    ) -> requests.Response:\n        \"\"\"\n        上传图片并返回image_key\n        :param image_path: 图片路径\n        :param image_type: 图片类型 (\"message\"|\"avatar\")\n        :param endpoint: 接口路径\n        :return: 飞书返回的image_key\n        :raises: FileNotFoundError, FileUploadError\n        \"\"\"\n    \n        \"\"\"发送API请求\"\"\"\n        url = f\"{self.base_url}{endpoint}\"\n        headers = {\n            \"Authorization\": f\"Bearer {self.tenant_access_token}\",\n        }\n    \n        # 合并自定义headers\n        if \"headers\" in kwargs:\n            headers.update(kwargs.pop(\"headers\"))\n    \n        # 使用 MultipartEncoder 构造请求体\n        multipart_form = MultipartEncoder(\n            fields={\n                'image_type': image_type,\n>               'image': (os.path.basename(image_path), open(image_path, 'rb'), 'image/jpeg')\n                                                        ^^^^^^^^^^^^^^^^^^^^^^\n            }\n        )\nE       FileNotFoundError: [Errno 2] No such file or directory: 'F:\\\\pictures\\\\mountainschool2.jpg'\n\ntests/client/client.py:135: FileNotFoundError"}, "parameters": [{"name": "prepared_test_case", "value": "TestCaseModel(name='基础富文本消息测试', description='测试发送基础富文本消息', category='positive', request=RequestModel(method='POST', endpoint='/open-apis/im/v1/messages', query_params={'receive_id_type': 'open_id'}, headers={'Content-Type': 'application/json', 'Authorization': 'Bearer $access_token$'}, body={'receive_id': '$open_id$', 'msg_type': 'post', 'content_json': {'zh_cn': {'title': '测试富文本2标题', 'content': [[{'tag': 'text', 'text': '第一行: ', 'style': ['bold']}, {'tag': 'a', 'text': '飞书官网', 'href': 'https://www.feishu.cn'}], [{'tag': 'text', 'text': '这是一段测试文本'}], [{'tag': 'hr'}], [{'tag': 'img', 'image_key': '$uploaded_image_key$'}]]}}, 'uuid': '$random_uuid$'}), expected=ExpectedModel(status_code=200, headers={'Content-Type': 'application/json'}, schema='message_response_schema', body={'code': 0, 'msg': 'success', 'data': {'msg_type': 'text', 'deleted': False, 'updated': False, 'sender.id_type': 'app_id', 'body.content': {'@contains': 'test content'}}}), setup=[{'action': 'get_access_token', 'save_to': 'access_token'}, {'action': 'get_open_id', 'save_to': 'open_id'}, {'action': 'generate_uuid', 'save_to': 'random_uuid'}, {'action': 'upload_image', 'save_to': 'uploaded_image_key', 'image_path': 'F:\\\\pictures\\\\mountainschool2.jpg', 'image_type': 'message'}], teardown=[{'action': 'delete_message', 'params': {'message_id': '$response.data.message_id$'}}])"}], "start": 1751816951668, "stop": 1751816951668, "uuid": "8b85cac6-bc9d-4f97-a98c-3d23098423e7", "historyId": "d20bc9fd1ed0e3ebec311474934f0e7d", "testCaseId": "4d5b8c9e44cecaca0cdfc79964acb980", "fullName": "tests.api.test_message#test_post_messages", "labels": [{"name": "parentSuite", "value": "tests.api"}, {"name": "suite", "value": "test_message"}, {"name": "host", "value": "192.168.1.121"}, {"name": "thread", "value": "50576-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.api.test_message"}]}