{"name": "test_chat_history[positive_获取单聊历史消息_默认参数]", "status": "failed", "statusDetails": {"message": "AssertionError: 状态码不匹配，期望 200，实际 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code", "trace": "client = <tests.client.client.FeishuClient object at 0x00000170661F2E40>\nprepared_test_case = {'context': {'chat_id': 'your_chat_id', 'tenant_access_token': 't-g10475jtDD46FY64TKRIUEUFPVLVAXRM7XTOM6P5'}, 'expecte...t-g10475jtDD46FY64TKRIUEUFPVLVAXRM7XTOM6P5', 'Content-Type': 'application/json; charset=utf-8'}, 'method': 'GET', ...}}\n\n    def test_chat_history(client, prepared_test_case):\n>       _generic_history_test(feishu_client, prepared_test_case)\n\ntests\\api\\history\\test_history.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nclient = <tests.client.client.FeishuClient object at 0x00000170661F2E40>\nprepared_test_case = {'context': {'chat_id': 'your_chat_id', 'tenant_access_token': 't-g10475jtDD46FY64TKRIUEUFPVLVAXRM7XTOM6P5'}, 'expecte...t-g10475jtDD46FY64TKRIUEUFPVLVAXRM7XTOM6P5', 'Content-Type': 'application/json; charset=utf-8'}, 'method': 'GET', ...}}\n\n    def _generic_history_test(client, prepared_test_case):\n        \"\"\"通用历史消息测试\"\"\"\n        with allure.step(\"Step 1: 准备测试用例\"):\n            test_data = prepared_test_case\n            request_data = test_data[\"request\"]\n    \n        with allure.step(\"Step 2: 发送请求\"):\n            # 发送请求\n            response = client.request(\n                method=request_data[\"method\"],\n                endpoint=request_data[\"endpoint\"],\n                params=request_data.get(\"query_params\"),\n                headers=request_data.get(\"headers\"),\n                json=request_data.get(\"body\")\n            )\n    \n        # 将响应保存到测试上下文中，供teardown使用\n        pytest.api_response = response\n    \n        with allure.step(\"Step 3: 验证响应\"):\n            # 验证响应\n            expected = test_data[\"expected\"]\n    \n            # 1. 验证状态码\n>           assert response.status_code == expected[\"status_code\"], \\\n                f\"状态码不匹配，期望 {expected['status_code']}，实际 {response.status_code}\"\nE           AssertionError: 状态码不匹配，期望 200，实际 400\nE           assert 400 == 200\nE            +  where 400 = <Response [400]>.status_code\n\ntests\\api\\history\\test_history.py:78: AssertionError"}, "steps": [{"name": "Step 1: 准备测试用例", "status": "passed", "start": 1751718303425, "stop": 1751718303425}, {"name": "Step 2: 发送请求", "status": "passed", "start": 1751718303425, "stop": 1751718303843}, {"name": "Step 3: 验证响应", "status": "failed", "statusDetails": {"message": "AssertionError: 状态码不匹配，期望 200，实际 400\nassert 400 == 200\n +  where 400 = <Response [400]>.status_code\n", "trace": "  File \"D:\\FeishuAPITest-main\\FeishuAPITest-main\\tests\\api\\history\\test_history.py\", line 78, in _generic_history_test\n    assert response.status_code == expected[\"status_code\"], \\\n        f\"状态码不匹配，期望 {expected['status_code']}，实际 {response.status_code}\"\n"}, "start": 1751718303843, "stop": 1751718303843}], "attachments": [{"name": "stdout", "source": "a350aa24-8825-4b0e-9816-c95775dc9bda-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "prepared_test_case", "value": "TestCaseModel(name='获取单聊历史消息_默认参数', description='测试获取单聊历史消息的基本功能，使用默认参数', category='positive', request=RequestModel(method='GET', endpoint='/open-apis/im/v1/messages', query_params={'container_id_type': 'chat', 'container_id': '$chat_id$'}, headers={'Content-Type': 'application/json; charset=utf-8', 'Authorization': 'Bearer $tenant_access_token$'}, body=None), expected=ExpectedModel(status_code=200, headers={'Content-Type': 'application/json'}, schema=None, body={'code': 0, 'msg': 'success', 'data': {'has_more': '@exists', 'items': '@exists'}}), setup=[{'action': 'get_tenant_access_token', 'save_to': 'tenant_access_token'}, {'action': 'get_chat_id', 'save_to': 'chat_id'}], teardown=None)"}], "start": 1751718303425, "stop": 1751718303844, "uuid": "7a24a69b-4786-4369-b27a-6a3e2fcbf7c0", "historyId": "b712b449815c23585f6cd21c42a186b5", "testCaseId": "5a1d9444ccd21acf19f3fda58023d786", "fullName": "tests.api.history.test_history#test_chat_history", "labels": [{"name": "parentSuite", "value": "tests.api.history"}, {"name": "suite", "value": "test_history"}, {"name": "host", "value": "OYY"}, {"name": "thread", "value": "2344-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.api.history.test_history"}]}